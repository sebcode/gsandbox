language: php

php:
  - 5.6
  #- 7.0 XXX https://github.com/Codeception/Codeception/issues/2730

addons:
  hosts:
    - gsandbox.localhost

cache:
  directories:
    - vendor
    - $HOME/.composer/cache

sudo: false

before_script:
  - echo "<?php return ['storePath' => '$TRAVIS_BUILD_DIR/data']; " > config.php
  - mkdir -p "$TRAVIS_BUILD_DIR/data/UNITTEST/vaults"
  - composer install -n
  - php -S 127.0.0.1:8080 htdocs/index.php &
  - sleep 1

script:
  - php vendor/bin/codecept run --coverage-xml

after_script:
  - php vendor/bin/coveralls -v

